CREATE DATABASE damasroyale;

USE damasroyale;

CREATE USER 'DamasRoyale'@'localhost' IDENTIFIED BY 'NoSeJugarAlAjedrez';

GRANT SELECT, INSERT, UPDATE, DELETE ON damasroyale.* TO 'DamasRoyale'@'localhost';

CREATE TABLE USUARIOS (
    ID INT(11) PRIMARY KEY AUTO_INCREMENT,
    NOMBRE VARCHAR(32) NOT NULL,
    EMAIL VARCHAR(64) NOT NULL,
    CONTRASENYA VARCHAR(64) NOT NULL,
    IMAGEN VARCHAR(64) NOT NULL,
    REGISTRO DATETIME NOT NULL,
    ESTADO CHAR(4) NOT NULL
);

CREATE TABLE ESTADISTICAS(
	ID INT(11) PRIMARY KEY AUTO_INCREMENT,
    IDUSUARIO INT(11) NOT NULL,
    TOTALES INT(11) NOT NULL,
    GANADAS INT(11) NOT NULL,
    PERDIDAS INT(11) NOT NULL,
    PUNTUACION INT(11) NOT NULL,
        FOREIGN KEY (IDUSUARIO)
        REFERENCES USUARIOS (ID)
        ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE ACTIVACIONES (
    ID INT(11) PRIMARY KEY NOT NULL AUTO_INCREMENT,
    IDUSUARIO INT(11) NOT NULL,
    CODIGO VARCHAR(15) NOT NULL,
    FOREIGN KEY (IDUSUARIO)
        REFERENCES USUARIOS (ID)
        ON DELETE CASCADE ON UPDATE CASCADE
);

INSERT INTO USUARIOS(NOMBRE, EMAIL, CONTRASENYA, IMAGEN, REGISTRO, ESTADO) VALUES ('Usuario01','usuario01@gmail.com','1234','default.jpg',now(),'Y');
INSERT INTO ESTADISTICAS(IDUSUARIO, TOTALES, GANADAS, PERDIDAS, PUNTUACION) VALUES (1,10,10,0,100);

INSERT INTO USUARIOS(NOMBRE, EMAIL, CONTRASENYA, IMAGEN, REGISTRO, ESTADO) VALUES ('Usuario02','usuario02@gmail.com','1234','default.jpg',now(),'Y');
INSERT INTO ESTADISTICAS(IDUSUARIO, TOTALES, GANADAS, PERDIDAS, PUNTUACION) VALUES (2,9,9,0,90);

INSERT INTO USUARIOS(NOMBRE, EMAIL, CONTRASENYA, IMAGEN, REGISTRO, ESTADO) VALUES ('Usuario03','usuario03@gmail.com','1234','default.jpg',now(),'Y');
INSERT INTO ESTADISTICAS(IDUSUARIO, TOTALES, GANADAS, PERDIDAS, PUNTUACION) VALUES (3,9,6,4,80);

INSERT INTO USUARIOS(NOMBRE, EMAIL, CONTRASENYA, IMAGEN, REGISTRO, ESTADO) VALUES ('Usuario04','usuario04@gmail.com','1234','default.jpg',now(),'Y');
INSERT INTO ESTADISTICAS(IDUSUARIO, TOTALES, GANADAS, PERDIDAS, PUNTUACION) VALUES (4,10,5,4,70);

INSERT INTO USUARIOS(NOMBRE, EMAIL, CONTRASENYA, IMAGEN, REGISTRO, ESTADO) VALUES ('Usuario05','usuario05@gmail.com','1234','default.jpg',now(),'Y');
INSERT INTO ESTADISTICAS(IDUSUARIO, TOTALES, GANADAS, PERDIDAS, PUNTUACION) VALUES (5,6,6,0,60);

INSERT INTO USUARIOS(NOMBRE, EMAIL, CONTRASENYA, IMAGEN, REGISTRO, ESTADO) VALUES ('Usuario06','usuario06@gmail.com','1234','default.jpg',now(),'Y');
INSERT INTO ESTADISTICAS(IDUSUARIO, TOTALES, GANADAS, PERDIDAS, PUNTUACION) VALUES (6,10,0,10,50);

INSERT INTO USUARIOS(NOMBRE, EMAIL, CONTRASENYA, IMAGEN, REGISTRO, ESTADO) VALUES ('Usuario07','usuario07@gmail.com','1234','default.jpg',now(),'Y');
INSERT INTO ESTADISTICAS(IDUSUARIO, TOTALES, GANADAS, PERDIDAS, PUNTUACION) VALUES (7,5,3,2,40);

INSERT INTO USUARIOS(NOMBRE, EMAIL, CONTRASENYA, IMAGEN, REGISTRO, ESTADO) VALUES ('Usuario08','usuario08@gmail.com','1234','default.jpg',now(),'Y');
INSERT INTO ESTADISTICAS(IDUSUARIO, TOTALES, GANADAS, PERDIDAS, PUNTUACION) VALUES (8,6,0,6,30);

INSERT INTO USUARIOS(NOMBRE, EMAIL, CONTRASENYA, IMAGEN, REGISTRO, ESTADO) VALUES ('Usuario09','usuario09@gmail.com','1234','default.jpg',now(),'Y');
INSERT INTO ESTADISTICAS(IDUSUARIO, TOTALES, GANADAS, PERDIDAS, PUNTUACION) VALUES (9,2,2,0,20);

INSERT INTO USUARIOS(NOMBRE, EMAIL, CONTRASENYA, IMAGEN, REGISTRO, ESTADO) VALUES ('Usuario10','usuario10@gmail.com','1234','default.jpg',now(),'Y');
INSERT INTO ESTADISTICAS(IDUSUARIO, TOTALES, GANADAS, PERDIDAS, PUNTUACION) VALUES (10,2,0,2,10);




