<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE mapper PUBLIC '-//mybatis.org//DTD Mapper 3.0//EN' 'http://mybatis.org/dtd/mybatis-3-mapper.dtd'>

<mapper
	namespace='com.damasroyale.modelo.dao.mappers.PartidaMapper'>

	<select id='getPartidaByID' resultType="Partida">
		SELECT * FROM PARTIDAS
		WHERE
		ID = #{id}
	</select>

	<select id='getAllPartidaByIdUsuario' resultType="Partida">
		SELECT * FROM
		PARTIDAS
		WHERE
		IDUSUARIO = #{id}
	</select>
	
	<select id='getResultadoByPartidaID' resultType="Resultado">
		SELECT * FROM
		RESULTADOS
		WHERE
		IDPARTIDA = #{id}
	</select>

	<select id='getAllResultadoByIdUsuario' resultType="Resultado">
		(SELECT RESULTADOS.ID, RESULTADOS.IDPARTIDA, RESULTADOS.FECHA_HORA, RESULTADOS.TABLAS, RESULTADOS.GANADOR, RESULTADOS.PERDEDOR
		FROM PARTIDAS
		INNER JOIN USUARIOS ON PARTIDAS.IDUSUARIO_A = USUARIOS.ID
		INNER JOIN RESULTADOS ON PARTIDAS.ID = RESULTADOS.IDPARTIDA
		AND USUARIOS.ID = #{id})
		
		UNION

		(SELECT RESULTADOS.ID, RESULTADOS.IDPARTIDA, RESULTADOS.FECHA_HORA, RESULTADOS.TABLAS, RESULTADOS.GANADOR, RESULTADOS.PERDEDOR
		FROM PARTIDAS
		INNER JOIN USUARIOS ON PARTIDAS.IDUSUARIO_B = USUARIOS.ID
		INNER JOIN RESULTADOS ON PARTIDAS.ID = RESULTADOS.IDPARTIDA
		AND USUARIOS.ID = #{id})
	</select>

</mapper>